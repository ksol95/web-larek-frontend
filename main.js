/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===_typeof(c)?c:String(c)),i)}var a,c}var t=function(){function EventEmitter(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,r){var o;this._events.has(t)||this._events.set(t,new Set),null===(o=this._events.get(t))||void 0===o||o.add(r)}},{key:"off",value:function off(t,r){var o;this._events.has(t)&&(this._events.get(t).delete(r),0===(null===(o=this._events.get(t))||void 0===o?void 0:o.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,r){this._events.forEach((function(o,i){(i instanceof RegExp&&i.test(t)||i===t)&&o.forEach((function(t){return t(r)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,r){var o=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(t,Object.assign(Object.assign({},i||{}),r||{}))}}}]),EventEmitter}();function locStorage_typeof(t){return locStorage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},locStorage_typeof(t)}function locStorage_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function locStorage_toPrimitive(t,r){if("object"!==locStorage_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==locStorage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===locStorage_typeof(c)?c:String(c)),i)}var a,c}var r=function(){function LocStorage(){!function locStorage_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,LocStorage)}return function locStorage_createClass(t,r,o){return r&&locStorage_defineProperties(t.prototype,r),o&&locStorage_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(LocStorage,null,[{key:"update",value:function update(t,r){Array.isArray(r)?localStorage.setItem(t,r.join(this.separator)):localStorage.setItem(t,r)}},{key:"append",value:function append(t,r){var o=localStorage[t]?localStorage[t]+",":"";Array.isArray(r)?localStorage.setItem(t,o+r.join(this.separator)):localStorage.setItem(t,o+r)}},{key:"get",value:function get(t){return localStorage[t]?localStorage[t].split(this.separator):[]}},{key:"removeItem",value:function removeItem(t,r){if(localStorage[t]){var o=localStorage[t].split(this.separator);if(o.includes(r)){var i=o.findIndex((function(t){return t===r}));o.splice(i,1)}this.update(t,o)}}},{key:"clear",value:function clear(){localStorage.clear()}}]),LocStorage}();function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function api_toPrimitive(t,r){if("object"!==api_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===api_typeof(c)?c:String(c)),i)}var a,c}r.separator=",";var o,i,a=function(){function Api(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(r=o.headers)&&void 0!==r?r:{})}}return function api_createClass(t,r,o){return r&&api_defineProperties(t.prototype,r),o&&api_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(r){var o;return Promise.reject(null!==(o=r.error)&&void 0!==o?o:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:o,body:JSON.stringify(r)})).then(this.handleResponse)}}]),Api}();function constants_typeof(t){return constants_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},constants_typeof(t)}function _defineProperty(t,r,o){return(r=function constants_toPropertyKey(t){var r=function constants_toPrimitive(t,r){if("object"!==constants_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==constants_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===constants_typeof(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}var c="".concat("","/api/weblarek"),u="".concat("","/content/weblarek"),l={request_productList:"/product",request_productItem:"/product/",request_order:"/order",categoryClass:"card__category_",сategoryType:(o={},_defineProperty(o,"софт-скил","soft"),_defineProperty(o,"хард-скил","hard"),_defineProperty(o,"другое","other"),_defineProperty(o,"кнопка","button"),_defineProperty(o,"дополнительное","additional"),o),productCardTemplateSelectors:{category:".card__category",title:".card__title",description:".card__text",price:".card__price",button:".card__button",image:".card__image",cart:".basket__item-index"},pageLockedClass:"page__wrapper_locked",pageTemplateSelectors:{wrapper:".page__wrapper",counter:".header__basket-counter",catalog:".gallery",cart:".header__basket"},cartTemplateSelectors:{list:".basket__list",price:".basket__price",action:".basket__button",emptyStyle:"basket__item card card_compact"},modalTemplateSelectors:{closeBtn:".modal__close",content:".modal__content",activeModal:"modal_active"},orderSuccessTemplate:{title:".order-success__title",description:".order-success__description",button:".order-success__close"},paymentMethods_default:"card",paymentMethods:(i={},_defineProperty(i,"При получении","cash"),_defineProperty(i,"Онлайн","card"),i),formErr:".form__errors",orderForm:{paymentButtons:".button_alt",paymentBtnActive:"button_alt-active",inputPayment:"payment",inputAddress:"address"},contactsForm:{inputPhone:"phone",inputEmail:"email"},HTMLTemplates:{success:"#success",productIncatalog:"#card-catalog",preview:"#card-preview",modal:"#modal-container",productInCart:"#card-basket",cart:"#basket",order:"#order",contacts:"#contacts",page:".page"},text:{deleteFromCart_btn:"Удалить из корзины",addToCart_btn:"Добавить в корзину",currency:" синапсов",nullPrice:"Бесценно",offTheMarket:"Недоступно",cartEmpty:"Корзина пуста",success:"Списано",err:{emptyAddress:"Необходимо указать адрес",emptyPhone:"Необходимо указать телефон",emptyEmail:"Необходимо указать email"}}},p="product:change",y="prduct:preview",d="prduct:addToCart",m="prduct:removeFromCart",h="cart:open",_="order:open",v="cart:change",b="order:changePaymentType",g=/^order\..*:change/,w="orderFormErrors:change",P="orderFormErrors:ready",O="order:submit",S=/^contacts\..*:change/,C="contactsFormErrors:change",k="contactsFormErrors:ready",V="contacts:submit",j="modal:open/close";function WebLarekApi_typeof(t){return WebLarekApi_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WebLarekApi_typeof(t)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,r,o){t[r]=o.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function define(t,r,o){return Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,o){return t[r]=o}}function wrap(t,r,o,a){var c=r&&r.prototype instanceof Generator?r:Generator,u=Object.create(c.prototype),l=new Context(a||[]);return i(u,"_invoke",{value:makeInvokeMethod(t,o,l)}),u}function tryCatch(t,r,o){try{return{type:"normal",arg:t.call(r,o)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var p={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var y={};define(y,c,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(values([])));m&&m!==r&&o.call(m,c)&&(y=m);var h=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(y);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,a,c,u){var l=tryCatch(t[i],t,a);if("throw"!==l.type){var p=l.arg,y=p.value;return y&&"object"==WebLarekApi_typeof(y)&&o.call(y,"__await")?r.resolve(y.__await).then((function(t){invoke("next",t,c,u)}),(function(t){invoke("throw",t,c,u)})):r.resolve(y).then((function(t){p.value=t,c(p)}),(function(t){return invoke("throw",t,c,u)}))}u(l.arg)}var a;i(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,o,r,i)}))}return a=a?a.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,r,o){var i="suspendedStart";return function(a,c){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw c;return doneResult()}for(o.method=a,o.arg=c;;){var u=o.delegate;if(u){var l=maybeInvokeDelegate(u,o);if(l){if(l===p)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===i)throw i="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i="executing";var y=tryCatch(t,r,o);if("normal"===y.type){if(i=o.done?"completed":"suspendedYield",y.arg===p)continue;return{value:y.arg,done:o.done}}"throw"===y.type&&(i="completed",o.method="throw",o.arg=y.arg)}}}function maybeInvokeDelegate(t,r){var o=r.method,i=t.iterator[o];if(void 0===i)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=void 0,maybeInvokeDelegate(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),p;var a=tryCatch(i,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,p;var c=a.arg;return c?c.done?(r[t.resultName]=c.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):c:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function next(){for(;++i<t.length;)if(o.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,i(h,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),i(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,l,"GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,o,i,a,c){void 0===c&&(c=Promise);var u=new AsyncIterator(wrap(r,o,i,a),c);return t.isGeneratorFunction(o)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},defineIteratorMethods(h),define(h,l,"Generator"),define(h,c,(function(){return this})),define(h,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=Object(t),o=[];for(var i in r)o.push(i);return o.reverse(),function next(){for(;o.length;){var t=o.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function handle(o,i){return c.type="throw",c.arg=t,r.next=o,i&&(r.method="next",r.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===t||"continue"===t)&&c.tryLoc<=r&&r<=c.finallyLoc&&(c=null);var u=c?c.completion:{};return u.type=t,u.arg=r,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(u)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),resetTryEntry(o),p}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc===t){var i=o.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(o)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,r,o){return this.delegate={iterator:values(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=void 0),p}},t}function asyncGeneratorStep(t,r,o,i,a,c,u){try{var l=t[c](u),p=l.value}catch(t){return void o(t)}l.done?r(p):Promise.resolve(p).then(i,a)}function _asyncToGenerator(t){return function(){var r=this,o=arguments;return new Promise((function(i,a){var c=t.apply(r,o);function _next(t){asyncGeneratorStep(c,i,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(c,i,a,_next,_throw,"throw",t)}_next(void 0)}))}}function WebLarekApi_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function WebLarekApi_toPrimitive(t,r){if("object"!==WebLarekApi_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==WebLarekApi_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===WebLarekApi_typeof(c)?c:String(c)),i)}var a,c}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===WebLarekApi_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var A=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(WebLarekApi,t);var r,o,i,a=_createSuper(WebLarekApi);function WebLarekApi(t,r){return function WebLarekApi_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WebLarekApi),a.call(this,t,r)}return function WebLarekApi_createClass(t,r,o){return r&&WebLarekApi_defineProperties(t.prototype,r),o&&WebLarekApi_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(WebLarekApi,[{key:"getProductList",value:(i=_asyncToGenerator(_regeneratorRuntime().mark((function _callee(){return _regeneratorRuntime().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get(l.request_productList);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),_callee,this)}))),function getProductList(){return i.apply(this,arguments)})},{key:"getProduct",value:(o=_asyncToGenerator(_regeneratorRuntime().mark((function _callee2(t){return _regeneratorRuntime().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.get("".concat(l.request_productItem).concat(t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),_callee2,this)}))),function getProduct(t){return o.apply(this,arguments)})},{key:"postOrder",value:(r=_asyncToGenerator(_regeneratorRuntime().mark((function _callee3(t){return _regeneratorRuntime().wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.post(l.request_order,t);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),_callee3,this)}))),function postOrder(t){return r.apply(this,arguments)})}]),WebLarekApi}(a);function model_typeof(t){return model_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},model_typeof(t)}function model_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function model_toPrimitive(t,r){if("object"!==model_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==model_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===model_typeof(c)?c:String(c)),i)}var a,c}var E=function(){function Model(t,r){!function model_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Model),this.events=r,Object.assign(this,t)}return function model_createClass(t,r,o){return r&&model_defineProperties(t.prototype,r),o&&model_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Model,[{key:"emitChanges",value:function emitChanges(t,r){this.events.emit(t,null!=r?r:{})}}]),Model}();function AppModel_typeof(t){return AppModel_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AppModel_typeof(t)}function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw c}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function AppModel_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function AppModel_toPrimitive(t,r){if("object"!==AppModel_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==AppModel_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===AppModel_typeof(c)?c:String(c)),i)}var a,c}function AppModel_setPrototypeOf(t,r){return AppModel_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},AppModel_setPrototypeOf(t,r)}function AppModel_createSuper(t){var r=function AppModel_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=AppModel_getPrototypeOf(t);if(r){var a=AppModel_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function AppModel_possibleConstructorReturn(t,r){if(r&&("object"===AppModel_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function AppModel_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function AppModel_getPrototypeOf(t){return AppModel_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},AppModel_getPrototypeOf(t)}var T=function(t){!function AppModel_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&AppModel_setPrototypeOf(t,r)}(AppModel,t);var r=AppModel_createSuper(AppModel);function AppModel(){var t;return function AppModel_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,AppModel),(t=r.apply(this,arguments)).products=[],t.order={address:"",payment:l.paymentMethods_default},t.contacts={phone:"",email:""},t}return function AppModel_createClass(t,r,o){return r&&AppModel_defineProperties(t.prototype,r),o&&AppModel_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(AppModel,[{key:"setProducts",value:function setProducts(t){this.products&&(this.products=t),this.events.emit(p)}},{key:"getProducts",value:function getProducts(){return this.products}},{key:"addToCart",value:function addToCart(t){this.cart.includes(t)||(this.cart.push(t),this.emitChanges(v,this.products))}},{key:"removeProductFromCart",value:function removeProductFromCart(t){if(this.cart.includes(t)){var r=this.cart.findIndex((function(r){return r===t}));this.cart.splice(r,1),this.emitChanges(v)}}},{key:"getCart",value:function getCart(){var t=this;return this.products.filter((function(r){return t.cart.includes(r.id)}))}},{key:"getTotalPrice",value:function getTotalPrice(){var t,r=this,o=0,i=_createForOfIteratorHelper(this.cart);try{var a=function _loop(){var i=t.value,a=r.products.find((function(t){return t.id===i}));if(!a||!a.price)return{v:void 0};o+=a.price};for(i.s();!(t=i.n()).done;){var c=a();if("object"===AppModel_typeof(c))return c.v}}catch(t){i.e(t)}finally{i.f()}return o}},{key:"getProductsCount",value:function getProductsCount(){return this.products.length}},{key:"getCountCart",value:function getCountCart(){return this.cart.length}},{key:"removeAllProductsFromCart",value:function removeAllProductsFromCart(){this.cart=[],this.emitChanges(v)}}]),AppModel}(E);function component_typeof(t){return component_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},component_typeof(t)}function component_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function component_toPrimitive(t,r){if("object"!==component_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==component_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===component_typeof(c)?c:String(c)),i)}var a,c}var M=function(){function Component(t){!function component_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Component),this.container=t}return function component_createClass(t,r,o){return r&&component_defineProperties(t.prototype,r),o&&component_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Component,[{key:"toggleClass",value:function toggleClass(t,r,o){t.classList.toggle(r,o)}},{key:"setText",value:function setText(t,r){t&&(t.textContent=String(r))}},{key:"setDisabled",value:function setDisabled(t,r){t&&(r?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))}},{key:"setHidden",value:function setHidden(t){t.style.display="none"}},{key:"setVisible",value:function setVisible(t){t.style.removeProperty("display")}},{key:"setImage",value:function setImage(t,r,o){t&&(t.src=r,o&&(t.alt=o))}},{key:"render",value:function render(t){return Object.assign(this,null!=t?t:{}),this.container}}]),Component}();function utils_unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return utils_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?utils_arrayLikeToArray(t,r):void 0}}function utils_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,r){if(isSelector(t)){var o=function ensureAllElements(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(r.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,r);if(o.length>1&&console.warn("selector ".concat(t," return more then one element")),0===o.length)throw new Error("selector ".concat(t," return nothing"));return o.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementData(t,r){for(var o in r)t.dataset[o]=String(r[o])}function createElement(t,r,o){var i,a,c=document.createElement(t);if(r)for(var u in r){var l=r[u];i=l,a=void 0,(a=Object.getPrototypeOf(i))!==Object.getPrototypeOf({})&&null!==a||"dataset"!==u?c[u]="boolean"==typeof l?l:String(l):setElementData(c,l)}if(o){var p,y=function utils_createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=utils_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,l=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return u=t.done,t},e:function e(t){l=!0,c=t},f:function f(){try{u||null==o.return||o.return()}finally{if(l)throw c}}}}(Array.isArray(o)?o:[o]);try{for(y.s();!(p=y.n()).done;){var d=p.value;c.append(d)}}catch(t){y.e(t)}finally{y.f()}}return c}function PageView_typeof(t){return PageView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PageView_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return PageView_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function PageView_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return PageView_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return PageView_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PageView_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function PageView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function PageView_toPrimitive(t,r){if("object"!==PageView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==PageView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===PageView_typeof(c)?c:String(c)),i)}var a,c}function PageView_setPrototypeOf(t,r){return PageView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},PageView_setPrototypeOf(t,r)}function PageView_createSuper(t){var r=function PageView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=PageView_getPrototypeOf(t);if(r){var a=PageView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function PageView_possibleConstructorReturn(t,r){if(r&&("object"===PageView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function PageView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function PageView_getPrototypeOf(t){return PageView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},PageView_getPrototypeOf(t)}var x=l.pageTemplateSelectors,L=function(t){!function PageView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&PageView_setPrototypeOf(t,r)}(MainPage,t);var r=PageView_createSuper(MainPage);function MainPage(t,o){var i;return function PageView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,MainPage),(i=r.call(this,t)).events=o,i._counter=ensureElement(x.counter,i.container),i._catalog=ensureElement(x.catalog,i.container),i._wrapper=ensureElement(x.wrapper,i.container),i._cartButton=ensureElement(x.cart,i.container),i._cartButton.addEventListener("click",(function(){i.events.emit(h)})),i}return function PageView_createClass(t,r,o){return r&&PageView_defineProperties(t.prototype,r),o&&PageView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(MainPage,[{key:"counter",set:function set(t){this.setText(this._counter,String(t))}},{key:"catalog",set:function set(t){var r;(r=this._catalog).replaceChildren.apply(r,_toConsumableArray(t))}},{key:"togglePageLock",value:function togglePageLock(){this.toggleClass(this._wrapper,l.pageLockedClass)}}]),MainPage}(M);function ProductCardView_typeof(t){return ProductCardView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ProductCardView_typeof(t)}function ProductCardView_toConsumableArray(t){return function ProductCardView_arrayWithoutHoles(t){if(Array.isArray(t))return ProductCardView_arrayLikeToArray(t)}(t)||function ProductCardView_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function ProductCardView_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return ProductCardView_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return ProductCardView_arrayLikeToArray(t,r)}(t)||function ProductCardView_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ProductCardView_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function ProductCardView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function ProductCardView_toPrimitive(t,r){if("object"!==ProductCardView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==ProductCardView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===ProductCardView_typeof(c)?c:String(c)),i)}var a,c}function ProductCardView_setPrototypeOf(t,r){return ProductCardView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},ProductCardView_setPrototypeOf(t,r)}function ProductCardView_createSuper(t){var r=function ProductCardView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=ProductCardView_getPrototypeOf(t);if(r){var a=ProductCardView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function ProductCardView_possibleConstructorReturn(t,r){if(r&&("object"===ProductCardView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function ProductCardView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function ProductCardView_getPrototypeOf(t){return ProductCardView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ProductCardView_getPrototypeOf(t)}var I=l.productCardTemplateSelectors,R=l.text,B=function(t){!function ProductCardView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ProductCardView_setPrototypeOf(t,r)}(ProductCard,t);var r=ProductCardView_createSuper(ProductCard);function ProductCard(t,o){var i;return function ProductCardView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProductCard),(i=r.call(this,t))._title=ensureElement(I.title,i.container),i._price=ensureElement(I.price,i.container),i._image=i.container.querySelector(I.image),i._category=i.container.querySelector(I.category),i._description=i.container.querySelector(I.description),i._index=i.container.querySelector(I.cart),i._button=i.container.querySelector(I.button),(null==o?void 0:o.onClick)&&(i._button?i._button.addEventListener("click",o.onClick):t.addEventListener("click",o.onClick)),i}return function ProductCardView_createClass(t,r,o){return r&&ProductCardView_defineProperties(t.prototype,r),o&&ProductCardView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ProductCard,[{key:"id",get:function get(){return this.container.dataset.id||""},set:function set(t){this.container.dataset.id=t}},{key:"title",get:function get(){return this._title.textContent||""},set:function set(t){this.setText(this._title,t)}},{key:"image",set:function set(t){this.setImage(this._image,t,this.title)}},{key:"category",get:function get(){return this._category.textContent},set:function set(t){this._category&&(this.setText(this._category,t),this._category.className=I.category.replace(/./,""),this.toggleClass(this._category,"".concat(l.categoryClass).concat(l["сategoryType"][t]),!0))}},{key:"price",get:function get(){return this._price.textContent||null},set:function set(t){this.setText(this._price,""===t?R.nullPrice:"\n\t\t\t\t".concat(t.toString().replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ")," ").concat(R.currency,"\n\t\t\t"))}},{key:"description",set:function set(t){var r,o=this;Array.isArray(t)?(r=this._description).replaceWith.apply(r,ProductCardView_toConsumableArray(t.map((function(t){var r=o._description.cloneNode();return o.setText(r,t),r})))):this.setText(this._description,t)}},{key:"inMarket",set:function set(t){t&&this.offTheMarket()}},{key:"inCart",set:function set(t){this.setText(this._button,t?R.deleteFromCart_btn:R.addToCart_btn)}},{key:"index",set:function set(t){this.setText(this._index,t.toString())}},{key:"offTheMarket",value:function offTheMarket(){this.setText(this._button,R.offTheMarket),this.setDisabled(this._button,!0)}}]),ProductCard}(M);function ModalView_typeof(t){return ModalView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ModalView_typeof(t)}function ModalView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function ModalView_toPrimitive(t,r){if("object"!==ModalView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==ModalView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===ModalView_typeof(c)?c:String(c)),i)}var a,c}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var i=function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=ModalView_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},_get.apply(this,arguments)}function ModalView_setPrototypeOf(t,r){return ModalView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},ModalView_setPrototypeOf(t,r)}function ModalView_createSuper(t){var r=function ModalView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=ModalView_getPrototypeOf(t);if(r){var a=ModalView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function ModalView_possibleConstructorReturn(t,r){if(r&&("object"===ModalView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return ModalView_assertThisInitialized(t)}(this,o)}}function ModalView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ModalView_getPrototypeOf(t){return ModalView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},ModalView_getPrototypeOf(t)}var N=l.modalTemplateSelectors,G=function(t){!function ModalView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&ModalView_setPrototypeOf(t,r)}(Modal,t);var r=ModalView_createSuper(Modal);function Modal(t,o){var i;return function ModalView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Modal),(i=r.call(this,t)).events=o,i.opening=!1,i.escHandle=function(t){"Escape"===t.key&&i.close()},i._closeButton=ensureElement(N.closeBtn,t),i._content=ensureElement(N.content,i.container),i._closeButton.addEventListener("click",(function(){return i.close.bind(ModalView_assertThisInitialized(i))})),i.container.addEventListener("click",i.close.bind(ModalView_assertThisInitialized(i))),i._content.addEventListener("click",(function(t){return t.stopPropagation()})),i}return function ModalView_createClass(t,r,o){return r&&ModalView_defineProperties(t.prototype,r),o&&ModalView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"open",value:function open(){this.opening=!0,this.toggleClass(this.container,N.activeModal),this.events.emit(j),document.addEventListener("keydown",this.escHandle)}},{key:"close",value:function close(){this.opening=!1,this.toggleClass(this.container,N.activeModal),this.content=null,this.events.emit(j),document.removeEventListener("keydown",this.escHandle)}},{key:"render",value:function render(t){return this.opening&&this.close(),_get(ModalView_getPrototypeOf(Modal.prototype),"render",this).call(this,t),this.open(),this.container}}]),Modal}(M);function CartView_typeof(t){return CartView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CartView_typeof(t)}function CartView_toConsumableArray(t){return function CartView_arrayWithoutHoles(t){if(Array.isArray(t))return CartView_arrayLikeToArray(t)}(t)||function CartView_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function CartView_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return CartView_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return CartView_arrayLikeToArray(t,r)}(t)||function CartView_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CartView_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function CartView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function CartView_toPrimitive(t,r){if("object"!==CartView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==CartView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===CartView_typeof(c)?c:String(c)),i)}var a,c}function CartView_setPrototypeOf(t,r){return CartView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},CartView_setPrototypeOf(t,r)}function CartView_createSuper(t){var r=function CartView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=CartView_getPrototypeOf(t);if(r){var a=CartView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function CartView_possibleConstructorReturn(t,r){if(r&&("object"===CartView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function CartView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function CartView_getPrototypeOf(t){return CartView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},CartView_getPrototypeOf(t)}var W=l.cartTemplateSelectors,D=l.text,H=function(t){!function CartView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&CartView_setPrototypeOf(t,r)}(Cart,t);var r=CartView_createSuper(Cart);function Cart(t,o){var i;return function CartView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Cart),(i=r.call(this,t)).events=o,i._list=ensureElement(W.list,i.container),i._total=ensureElement(W.price,i.container),i._button=ensureElement(W.action,i.container),i._button&&i._button.addEventListener("click",(function(){o.emit(_)})),i.products=[],i}return function CartView_createClass(t,r,o){return r&&CartView_defineProperties(t.prototype,r),o&&CartView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Cart,[{key:"products",set:function set(t){var r;t.length?((r=this._list).replaceChildren.apply(r,CartView_toConsumableArray(t)),this.toggleButton(!1)):(this.toggleButton(!0),this._list.replaceChildren(createElement("li",{classList:W.emptyStyle,textContent:D.cartEmpty})))}},{key:"total",set:function set(t){this.setText(this._total,"\n\t\t\t".concat(t.toString().replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ")," ").concat(D.currency,"\n\t\t"))}},{key:"toggleButton",value:function toggleButton(t){this.setDisabled(this._button,t)}}]),Cart}(M);function FormsView_typeof(t){return FormsView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FormsView_typeof(t)}function FormsView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function FormsView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function FormsView_toPrimitive(t,r){if("object"!==FormsView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==FormsView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===FormsView_typeof(c)?c:String(c)),i)}var a,c}function FormsView_createClass(t,r,o){return r&&FormsView_defineProperties(t.prototype,r),o&&FormsView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function FormsView_get(){return FormsView_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var i=function FormsView_superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=FormsView_getPrototypeOf(t)););return t}(t,r);if(i){var a=Object.getOwnPropertyDescriptor(i,r);return a.get?a.get.call(arguments.length<3?t:o):a.value}},FormsView_get.apply(this,arguments)}function FormsView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&FormsView_setPrototypeOf(t,r)}function FormsView_setPrototypeOf(t,r){return FormsView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},FormsView_setPrototypeOf(t,r)}function FormsView_createSuper(t){var r=function FormsView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=FormsView_getPrototypeOf(t);if(r){var a=FormsView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function FormsView_possibleConstructorReturn(t,r){if(r&&("object"===FormsView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function FormsView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function FormsView_getPrototypeOf(t){return FormsView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},FormsView_getPrototypeOf(t)}var __rest=function(t,r){var o={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(t);a<i.length;a++)r.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(o[i[a]]=t[i[a]])}return o},$=l.orderForm,q=l.contactsForm,z=l.text,U=function(t){FormsView_inherits(Form,t);var r=FormsView_createSuper(Form);function Form(t,o){var i;return FormsView_classCallCheck(this,Form),(i=r.call(this,t)).container=t,i.events=o,i._submit=ensureElement("button[type=submit]",i.container),i._errors=ensureElement(l.formErr,i.container),i.container.addEventListener("input",(function(t){var r=t.target,o=r.name,a=r.value;i.onInputChange(o,a)})),i.container.addEventListener("submit",(function(t){t.preventDefault(),i.events.emit("".concat(i.container.name,":submit"))})),i}return FormsView_createClass(Form,[{key:"onInputChange",value:function onInputChange(t,r){this.events.emit("".concat(this.container.name,".").concat(String(t),":change"),{field:t,value:r})}},{key:"valid",set:function set(t){this.setDisabled(this._submit,!t)}},{key:"errors",set:function set(t){this.setText(this._errors,t)}},{key:"render",value:function render(t){var r=t.valid,o=t.errors,i=__rest(t,["valid","errors"]);return FormsView_get(FormsView_getPrototypeOf(Form.prototype),"render",this).call(this,{valid:r,errors:o}),Object.assign(this,i),this.container}}]),Form}(M),Y=function(t){FormsView_inherits(OrderForm,t);var r=FormsView_createSuper(OrderForm);function OrderForm(t,o){var i;return FormsView_classCallCheck(this,OrderForm),(i=r.call(this,t,o)).inputs={payment:l.paymentMethods_default,address:""},i.formErrors={},i._paymentButtons=Array.from(i.container.querySelectorAll($.paymentButtons)),i._paymentButtons.length&&i._paymentButtons.forEach((function(t){t.addEventListener("click",(function(){i.events.emit(b,{type:i.paymentChoice(t)})}))})),i}return FormsView_createClass(OrderForm,[{key:"address",set:function set(t){this.container.elements.namedItem($.inputAddress).value=t}},{key:"payment",set:function set(t){var r=this;this._paymentButtons.forEach((function(t){r.toggleClass(t,$.paymentBtnActive,!1)})),this.toggleClass(this._paymentButtons.find((function(r){return r.name===t})),$.paymentBtnActive,!0)}},{key:"paymentChoice",value:function paymentChoice(t){var r=this;return this._paymentButtons.forEach((function(t){r.toggleClass(t,$.paymentBtnActive,!1)})),this.toggleClass(t,$.paymentBtnActive,!0),t.name}},{key:"setOrderField",value:function setOrderField(t,r){"payment"!=t&&(this.inputs[t]=r,this.validateOrder()&&this.events.emit(P,this.inputs))}},{key:"validateOrder",value:function validateOrder(){var t={};return this.inputs.address||(t.address=z.err.emptyAddress),this.formErrors=t,this.events.emit(w,this.formErrors),0===Object.keys(t).length}}]),OrderForm}(U),J=function(t){FormsView_inherits(ContactsForm,t);var r=FormsView_createSuper(ContactsForm);function ContactsForm(t,o){var i;return FormsView_classCallCheck(this,ContactsForm),(i=r.call(this,t,o)).inputs={phone:"",email:""},i.formErrors={},i}return FormsView_createClass(ContactsForm,[{key:"phone",set:function set(t){this.container.elements.namedItem(q.inputPhone).value=t}},{key:"email",set:function set(t){this.container.elements.namedItem(q.inputEmail).value=t}},{key:"setContactsField",value:function setContactsField(t,r){this.inputs[t]=r,this.validateContacts()&&this.events.emit(k,this.inputs)}},{key:"validateContacts",value:function validateContacts(){var t={};return this.inputs.phone||(t.phone=z.err.emptyPhone),this.inputs.email||(t.phone=z.err.emptyEmail),this.formErrors=t,this.events.emit(C,this.formErrors),0===Object.keys(t).length}}]),ContactsForm}(U);function OrderSuccessView_typeof(t){return OrderSuccessView_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OrderSuccessView_typeof(t)}function OrderSuccessView_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function OrderSuccessView_toPrimitive(t,r){if("object"!==OrderSuccessView_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==OrderSuccessView_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===OrderSuccessView_typeof(c)?c:String(c)),i)}var a,c}function OrderSuccessView_setPrototypeOf(t,r){return OrderSuccessView_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},OrderSuccessView_setPrototypeOf(t,r)}function OrderSuccessView_createSuper(t){var r=function OrderSuccessView_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=OrderSuccessView_getPrototypeOf(t);if(r){var a=OrderSuccessView_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function OrderSuccessView_possibleConstructorReturn(t,r){if(r&&("object"===OrderSuccessView_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function OrderSuccessView_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function OrderSuccessView_getPrototypeOf(t){return OrderSuccessView_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},OrderSuccessView_getPrototypeOf(t)}var K=l.orderSuccessTemplate,Q=l.text,X=function(t){!function OrderSuccessView_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&OrderSuccessView_setPrototypeOf(t,r)}(OrderSuccess,t);var r=OrderSuccessView_createSuper(OrderSuccess);function OrderSuccess(t,o){var i;return function OrderSuccessView_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrderSuccess),(i=r.call(this,t))._title=ensureElement(K.title,i.container),i._description=ensureElement(K.description,i.container),i._buttonClose=ensureElement(K.button,i.container),(null==o?void 0:o.onClick)&&i._buttonClose.addEventListener("click",o.onClick),i}return function OrderSuccessView_createClass(t,r,o){return r&&OrderSuccessView_defineProperties(t.prototype,r),o&&OrderSuccessView_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrderSuccess,[{key:"total",set:function set(t){this.setText(this._description,"\n\t\t\t\t".concat(Q.success," ").concat(t.toString().replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ")," ").concat(Q.currency,"\n\t\t\t"))}}]),OrderSuccess}(M);function src_toConsumableArray(t){return function src_arrayWithoutHoles(t){if(Array.isArray(t))return src_arrayLikeToArray(t)}(t)||function src_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function src_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return src_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return src_arrayLikeToArray(t,r)}(t)||function src_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function src_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}var Z=l.HTMLTemplates,ee=ensureElement(Z.productIncatalog),te=ensureElement(Z.preview),re=ensureElement(Z.productInCart),oe=cloneTemplate(ensureElement(Z.cart)),ne=cloneTemplate(ensureElement(Z.order)),ie=cloneTemplate(ensureElement(Z.contacts)),ae=ensureElement(Z.modal),ce=cloneTemplate(ensureElement(Z.success)),ue=ensureElement(Z.page),se=new A(c),le=new t,fe=new T({cart:r.get("cart")},le),pe=new L(ue,le),ye=new G(ae,le),de=new H(oe,le),me=new Y(ne,le),he=new J(ie,le);se.getProductList().then((function(t){console.log(t),fe.setProducts(t.items)})).catch(console.error),le.on(p,(function(){var t=fe.getProducts().map((function(t){return new B(cloneTemplate(ee),{onClick:function onClick(){return le.emit(y,t)}}).render({category:t.category,title:t.title,image:u+t.image,price:null===t.price?"":t.price.toString()})}));pe.catalog=t,le.emit(v)})),le.on(y,(function(t){var r=new B(cloneTemplate(te),{onClick:function onClick(){le.emit(fe.cart.includes(t.id)?m:d,t),le.emit(y,t)}});ye.render({content:r.render({image:u+t.image,category:t.category,title:t.title,description:t.description,price:null===t.price?"":t.price.toString(),inCart:fe.cart.includes(t.id),inMarket:null===t.price})})})),le.on(d,(function(t){fe.addToCart(t.id),r.append("cart",t.id)})),le.on(m,(function(t){fe.removeProductFromCart(t.id),r.removeItem("cart",t.id)})),le.on(h,(function(){var t=fe.getCart().map((function(t,r){var o;return new B(cloneTemplate(re),{onClick:function onClick(){le.emit(m,t),le.emit(h)}}).render({index:r+1,title:t.title,price:(null===(o=t.price)||void 0===o?void 0:o.toString())||"0"})}));ye.render({content:de.render({products:t,total:fe.getTotalPrice()})})})),le.on(_,(function(){ye.render({content:me.render({payment:fe.order.payment,address:fe.order.address,valid:""!==fe.order.address,errors:[]})})})),le.on(b,(function(t){return me.inputs.payment=t.type})),le.on(g,(function(t){return me.setOrderField(t.field,t.value)})),le.on(w,(function(t){me.valid=!t,me.errors=Object.values(t).filter((function(t){return!!t})).join("; ")})),le.on(P,(function(){return me.valid=!0})),le.on(O,(function(){fe.order=me.inputs,ye.render({content:he.render({phone:fe.contacts.phone,email:fe.contacts.email,valid:fe.contacts.phone&&""!==fe.contacts.email,errors:[]})})})),le.on(S,(function(t){he.setContactsField(t.field,t.value)})),le.on(C,(function(t){var r=t.email,o=t.phone;he.valid=!r&&!o,he.errors=Object.values({phone:o,email:r}).filter((function(t){return!!t})).join("; ")})),le.on(k,(function(){return he.valid=!0})),le.on(V,(function(){fe.contacts=he.inputs;var t={payment:fe.order.payment,address:fe.order.address,email:fe.contacts.email,phone:fe.contacts.phone,items:src_toConsumableArray(fe.cart),total:fe.getTotalPrice()};se.postOrder(t).then((function(t){fe.removeAllProductsFromCart(),r.clear();var o=new X(ce,{onClick:function onClick(){ye.close()}});ye.render({content:o.render({total:t.total})})})).catch(console.error)})),le.on(v,(function(){return pe.counter=fe.getCountCart()})),le.on(j,(function(){pe.togglePageLock()}))})();
//# sourceMappingURL=main.js.map